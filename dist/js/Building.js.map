{"version":3,"sources":["../../js/Building.js"],"names":[],"mappings":"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","file":"Building.js","sourcesContent":["/**\r\n * A building is a structure that can be bought by the player\r\n */\r\nclass Building extends GameObject{\r\n\r\n    constructor(game, position) {\r\n        super(game);\r\n\r\n        // Building position\r\n        this.position = position;\r\n\r\n        // Knowing if the price is rising of decreasing)\r\n        this._oldPrice = 0;\r\n        this._oldArrow = null;\r\n\r\n        // The time that a house can be bought\r\n        this.canBuyTime = Game.randomNumber(5000, 10000);\r\n        this.timer = new Timer(this.canBuyTime, this.getScene(), {autostart:true, autodestroy:true});\r\n        this.timer.onFinish = () => {\r\n            // If the player doesn't want to buy this building, make it disapear\r\n            this.demolish(() => {\r\n                this.game.cleanPosition(this);\r\n            });\r\n        };\r\n        this.timer.start();\r\n\r\n        // Has this building been bought ?\r\n        this.bought = false;\r\n\r\n        // The current price of this building\r\n        this.price = 0;\r\n        this.basePrice = 1000;\r\n        let dr = this.basePrice/4;\r\n\r\n        this.parameters = [\r\n            Game.randomNumber(-7,7), //inflation\r\n            Game.randomNumber(this.basePrice-dr, this.basePrice+dr), // range\r\n            Math.random(), // frequency 1\r\n            Math.random(), // frequency 2\r\n            Math.random()  // frequency 3\r\n        ];\r\n\r\n        // placeholder shape\r\n        let cube = BABYLON.MeshBuilder.CreateBox('', {width:0.5, height:1, depth:0.5}, this.getScene())\r\n        cube.position.y = 0.5;\r\n        this.addChildren(cube);\r\n\r\n        // Arrows\r\n        //this.arrowTag = document.createElement('i');\r\n        //\r\n        //// Price label\r\n        //this.priceText = document.createElement('span');\r\n        //this.priceText.innerHTML = '99999';\r\n        //\r\n        //this.priceTag = document.createElement('div');\r\n        //this.priceTag.className = 'priceTag';\r\n        //this.priceTag.appendChild(this.priceText);\r\n        //this.priceTag.appendChild(this.arrowTag);\r\n\r\n        // Set ready !\r\n        this.setReady();\r\n\r\n        // Build it !\r\n        this.build();\r\n    }\r\n\r\n    /**\r\n     * Remove this building\r\n     */\r\n    demolish(callback) {\r\n\r\n        let duration = 1000;\r\n        let fps = 20;\r\n        let quarter = duration*fps*0.001/4;\r\n\r\n        this.animations = [];\r\n        // Position animation\r\n        let position = new BABYLON.Animation(\"\", \"position.y\", fps, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n        position.setKeys([\r\n            { frame: 0, value: this.position.y },\r\n            { frame: quarter, value: this.position.y+1 },\r\n            { frame: quarter*4, value: 0 }\r\n        ]);\r\n        let e = new BABYLON.CubicEase();\r\n        e.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);\r\n        position.setEasingFunction(e);\r\n        this.animations.push(position);\r\n\r\n        // Scaling\r\n        let scaling = new BABYLON.Animation(\"\", \"scaling\", fps, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n        scaling.setKeys([\r\n            { frame: 0, value: new BABYLON.Vector3(1,1,1) },\r\n            { frame: quarter*2, value: new BABYLON.Vector3(1.2,1.2,1.2) },\r\n            { frame: quarter*4, value: BABYLON.Vector3.Zero() }\r\n        ]);\r\n        this.animations.push(scaling);\r\n\r\n        // Rotation\r\n        let rotation = new BABYLON.Animation(\"\", \"rotation.y\", fps, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n        rotation.setKeys([\r\n            { frame: 0, value: 0 },\r\n            { frame: quarter*4, value: Math.PI*4 }\r\n        ]);\r\n        rotation.setEasingFunction(e);\r\n        this.animations.push(rotation);\r\n\r\n        this.getScene().beginAnimation(this, 0, duration, false, 1, () => {\r\n            callback();\r\n        });\r\n    }\r\n\r\n    build(callback) {\r\n        let duration = 1000;\r\n        let fps = 20;\r\n        let quarter = duration*fps*0.001/4;\r\n\r\n        this.animations = [];\r\n        // Position animation\r\n        let position = new BABYLON.Animation(\"\", \"position.y\", fps, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n        position.setKeys([\r\n            { frame: 0, value: 0 },\r\n            { frame: quarter, value: this.position.y+1 },\r\n            { frame: quarter*4, value: this.position.y }\r\n        ]);\r\n        let e = new BABYLON.CubicEase();\r\n        e.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);\r\n        position.setEasingFunction(e);\r\n        this.animations.push(position);\r\n\r\n        // Scaling\r\n        let scaling = new BABYLON.Animation(\"\", \"scaling\", fps, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n        scaling.setKeys([\r\n            { frame: 0, value: BABYLON.Vector3.Zero() },\r\n            { frame: quarter*3, value: new BABYLON.Vector3(1.2,1.2,1.2) },\r\n            { frame: quarter*4, value: new BABYLON.Vector3(1,1,1) }\r\n        ]);\r\n        let f = new BABYLON.ElasticEase();\r\n        f.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEOUT);\r\n        scaling.setEasingFunction(f);\r\n        this.animations.push(scaling);\r\n\r\n        // Rotation\r\n        let rotation = new BABYLON.Animation(\"\", \"rotation.y\", fps, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);\r\n        rotation.setKeys([\r\n            { frame: 0, value: 0 },\r\n            { frame: quarter*4, value: Math.PI*2 }\r\n        ]);\r\n        rotation.setEasingFunction(e);\r\n        this.animations.push(rotation);\r\n\r\n\r\n        this.getScene().beginAnimation(this, 0, duration, false, 1, () => {\r\n            //this.displayPrice();\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns screen coordinates of the building\r\n     */\r\n    _project() {\r\n        var tmpPos = this.position.clone();\r\n        return BABYLON.Vector3.Project(\r\n            tmpPos,\r\n            BABYLON.Matrix.Identity(),\r\n            this.getScene().getTransformMatrix(),\r\n            this.getScene().activeCamera.viewport.toGlobal(this.getScene().getEngine())\r\n        );\r\n    };\r\n\r\n    displayPrice() {\r\n        document.getElementsByTagName('body')[0].appendChild(this.priceTag);\r\n        var p = this._project();\r\n\r\n        p.y += this.priceTag.clientHeight / 2;\r\n        p.x -= this.priceTag.clientWidth / 2;\r\n\r\n        this.priceTag.style.top = Math.floor(p.y) + \"px\";\r\n        this.priceTag.style.left = Math.floor(p.x) + \"px\";\r\n    }\r\n\r\n    updatePrice() {\r\n        this._oldPrice = this.price;\r\n        this.time += 0.005;\r\n        this.price = Math.floor(\r\n            this.basePrice +\r\n            this.parameters[0]*this.time+\r\n            this.parameters[1]*\r\n            Math.sin(this.parameters[2]*this.time) *\r\n            Math.cos(this.parameters[3]*this.time) *\r\n            Math.sin(this.parameters[4]*this.time)\r\n        );\r\n\r\n        let arrow = this._oldArrow;\r\n        if (this._oldPrice > this.price) {\r\n            arrow ='fa fa-arrow-down';\r\n            this._oldArrow = arrow;\r\n        } else if (this._oldPrice < this.price) {\r\n            arrow ='fa fa-arrow-up';\r\n            this._oldArrow = arrow;\r\n        }\r\n        // display\r\n        this.arrowTag.className = arrow;\r\n        this.priceText.innerHTML = this.price;\r\n    }\r\n}"]}